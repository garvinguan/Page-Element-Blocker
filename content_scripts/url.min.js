!function(){"use strict";var t=function(t,s){if(!t||!s)return t;for(var i in s)t[i]!==s[i]&&(t[i]=s[i]);return t},s=function(t,s,i){for(var e=t.split(/\n/g),f=0,h=0;s>=h;)h+=e[f].length+1,f+=1;var _="Line "+f+": expected "+i.join(", ")+"\n",o=e[f-1];for(_+=o+"\n",h-=o.length+1;s>h;)_+=" ",h+=1;return _+"^"},i=function(t,s){var i=function(){};i.prototype=s.prototype,t.prototype=new i,t.prototype.constructor=t},e=function(t,s,i){this.text=t,this.offset=s,this.elements=i||[]};e.prototype.forEach=function(t,s){for(var i=this.elements,e=0,f=i.length;f>e;e++)t.call(s,i[e],e,i)};var f=function(t,s,i){e.apply(this,arguments),this.scheme=i[0],this.host=i[2],this.pathname=i[3],this.search=i[4]};i(f,e);var h=function(t,s,i){e.apply(this,arguments),this.hostname=i[0]};i(h,e);var _=function(t,s,i){e.apply(this,arguments),this.segment=i[0]};i(_,e);var o=function(t,s,i){e.apply(this,arguments),this.segment=i[1]};i(o,e);var n=function(t,s,i){e.apply(this,arguments),this.query=i[1]};i(n,e);var r={},u={_read_url:function(){var t=r,s=this._offset;this._cache._url=this._cache._url||{};var i=this._cache._url[s];if(i)return this._offset=i[1],i[0];var h=this._offset,_=new Array(6),o=r;if(o=this._read_scheme(),o!==r){_[0]=o;var n=r,u=null;if(this._offset<this._inputSize&&(u=this._input.substring(this._offset,this._offset+3)),"://"===u?(n=new e(this._input.substring(this._offset,this._offset+3),this._offset),this._offset=this._offset+3):(n=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"://"')),n!==r){_[1]=n;var a=r;if(a=this._read_host(),a!==r){_[2]=a;var l=r;if(l=this._read_pathname(),l!==r){_[3]=l;var p=r;if(p=this._read_search(),p!==r){_[4]=p;var c=r,g=this._offset;c=this._read_hash(),c===r&&(c=new e(this._input.substring(g,g),g),this._offset=g),c!==r?_[5]=c:(_=null,this._offset=h)}else _=null,this._offset=h}else _=null,this._offset=h}else _=null,this._offset=h}else _=null,this._offset=h}else _=null,this._offset=h;return null===_?t=r:(t=new f(this._input.substring(h,this._offset),h,_),this._offset=this._offset),this._cache._url[s]=[t,this._offset],t},_read_scheme:function(){var t=r,s=this._offset;this._cache._scheme=this._cache._scheme||{};var i=this._cache._scheme[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=new Array(2),_=r,o=null;if(this._offset<this._inputSize&&(o=this._input.substring(this._offset,this._offset+4)),"http"===o?(_=new e(this._input.substring(this._offset,this._offset+4),this._offset),this._offset=this._offset+4):(_=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"http"')),_!==r){h[0]=_;var n=r,u=this._offset,a=null;this._offset<this._inputSize&&(a=this._input.substring(this._offset,this._offset+1)),"s"===a?(n=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(n=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"s"')),n===r&&(n=new e(this._input.substring(u,u),u),this._offset=u),n!==r?h[1]=n:(h=null,this._offset=f)}else h=null,this._offset=f;return null===h?t=r:(t=new e(this._input.substring(f,this._offset),f,h),this._offset=this._offset),this._cache._scheme[s]=[t,this._offset],t},_read_host:function(){var t=r,s=this._offset;this._cache._host=this._cache._host||{};var i=this._cache._host[s];if(i)return this._offset=i[1],i[0];var f=this._offset,_=new Array(2),o=r;if(o=this._read_hostname(),o!==r){_[0]=o;var n=r,u=this._offset;n=this._read_port(),n===r&&(n=new e(this._input.substring(u,u),u),this._offset=u),n!==r?_[1]=n:(_=null,this._offset=f)}else _=null,this._offset=f;return null===_?t=r:(t=new h(this._input.substring(f,this._offset),f,_),this._offset=this._offset),this._cache._host[s]=[t,this._offset],t},_read_hostname:function(){var t=r,s=this._offset;this._cache._hostname=this._cache._hostname||{};var i=this._cache._hostname[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=new Array(2),n=r;if(n=this._read_segment(),n!==r){h[0]=n;for(var u=r,a=0,l=this._offset,p=[],c=!0;c!==r;){var g=this._offset,v=new Array(2),d=r,w=null;if(this._offset<this._inputSize&&(w=this._input.substring(this._offset,this._offset+1)),"."===w?(d=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(d=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"."')),d!==r){v[0]=d;var b=r;b=this._read_segment(),b!==r?v[1]=b:(v=null,this._offset=g)}else v=null,this._offset=g;null===v?c=r:(c=new o(this._input.substring(g,this._offset),g,v),this._offset=this._offset),c!==r&&(p.push(c),--a)}0>=a?(u=new e(this._input.substring(l,this._offset),l,p),this._offset=this._offset):u=r,u!==r?h[1]=u:(h=null,this._offset=f)}else h=null,this._offset=f;return null===h?t=r:(t=new _(this._input.substring(f,this._offset),f,h),this._offset=this._offset),this._cache._hostname[s]=[t,this._offset],t},_read_segment:function(){var t=r,s=this._offset;this._cache._segment=this._cache._segment||{};var i=this._cache._segment[s];if(i)return this._offset=i[1],i[0];for(var f=1,h=this._offset,_=[],o=!0;o!==r;){var n=null;this._offset<this._inputSize&&(n=this._input.substring(this._offset,this._offset+1)),null!==n&&/^[a-z0-9-]/.test(n)?(o=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(o=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push("[a-z0-9-]")),o!==r&&(_.push(o),--f)}return 0>=f?(t=new e(this._input.substring(h,this._offset),h,_),this._offset=this._offset):t=r,this._cache._segment[s]=[t,this._offset],t},_read_port:function(){var t=r,s=this._offset;this._cache._port=this._cache._port||{};var i=this._cache._port[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=new Array(2),_=r,o=null;if(this._offset<this._inputSize&&(o=this._input.substring(this._offset,this._offset+1)),":"===o?(_=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(_=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('":"')),_!==r){h[0]=_;for(var n=r,u=1,a=this._offset,l=[],p=!0;p!==r;){var c=null;this._offset<this._inputSize&&(c=this._input.substring(this._offset,this._offset+1)),null!==c&&/^[0-9]/.test(c)?(p=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(p=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push("[0-9]")),p!==r&&(l.push(p),--u)}0>=u?(n=new e(this._input.substring(a,this._offset),a,l),this._offset=this._offset):n=r,n!==r?h[1]=n:(h=null,this._offset=f)}else h=null,this._offset=f;return null===h?t=r:(t=new e(this._input.substring(f,this._offset),f,h),this._offset=this._offset),this._cache._port[s]=[t,this._offset],t},_read_pathname:function(){var t=r,s=this._offset;this._cache._pathname=this._cache._pathname||{};var i=this._cache._pathname[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=new Array(2),_=r,o=null;if(this._offset<this._inputSize&&(o=this._input.substring(this._offset,this._offset+1)),"/"===o?(_=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(_=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"/"')),_!==r){h[0]=_;for(var n=r,u=0,a=this._offset,l=[],p=!0;p!==r;){var c=null;this._offset<this._inputSize&&(c=this._input.substring(this._offset,this._offset+1)),null!==c&&/^[^ ?]/.test(c)?(p=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(p=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push("[^ ?]")),p!==r&&(l.push(p),--u)}0>=u?(n=new e(this._input.substring(a,this._offset),a,l),this._offset=this._offset):n=r,n!==r?h[1]=n:(h=null,this._offset=f)}else h=null,this._offset=f;return null===h?t=r:(t=new e(this._input.substring(f,this._offset),f,h),this._offset=this._offset),this._cache._pathname[s]=[t,this._offset],t},_read_search:function(){var t=r,s=this._offset;this._cache._search=this._cache._search||{};var i=this._cache._search[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=this._offset,_=new Array(2),o=r,u=null;if(this._offset<this._inputSize&&(u=this._input.substring(this._offset,this._offset+1)),"?"===u?(o=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(o=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"?"')),o!==r){_[0]=o;for(var a=r,l=0,p=this._offset,c=[],g=!0;g!==r;){var v=null;this._offset<this._inputSize&&(v=this._input.substring(this._offset,this._offset+1)),null!==v&&/^[^ #]/.test(v)?(g=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(g=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push("[^ #]")),g!==r&&(c.push(g),--l)}0>=l?(a=new e(this._input.substring(p,this._offset),p,c),this._offset=this._offset):a=r,a!==r?_[1]=a:(_=null,this._offset=h)}else _=null,this._offset=h;return null===_?t=r:(t=new n(this._input.substring(h,this._offset),h,_),this._offset=this._offset),t===r&&(t=new e(this._input.substring(f,f),f),this._offset=f),this._cache._search[s]=[t,this._offset],t},_read_hash:function(){var t=r,s=this._offset;this._cache._hash=this._cache._hash||{};var i=this._cache._hash[s];if(i)return this._offset=i[1],i[0];var f=this._offset,h=new Array(2),_=r,o=null;if(this._offset<this._inputSize&&(o=this._input.substring(this._offset,this._offset+1)),"#"===o?(_=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(_=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push('"#"')),_!==r){h[0]=_;for(var n=r,u=0,a=this._offset,l=[],p=!0;p!==r;){var c=null;this._offset<this._inputSize&&(c=this._input.substring(this._offset,this._offset+1)),null!==c&&/^[^ ]/.test(c)?(p=new e(this._input.substring(this._offset,this._offset+1),this._offset),this._offset=this._offset+1):(p=r,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push("[^ ]")),p!==r&&(l.push(p),--u)}0>=u?(n=new e(this._input.substring(a,this._offset),a,l),this._offset=this._offset):n=r,n!==r?h[1]=n:(h=null,this._offset=f)}else h=null,this._offset=f;return null===h?t=r:(t=new e(this._input.substring(f,this._offset),f,h),this._offset=this._offset),this._cache._hash[s]=[t,this._offset],t}},a=function(t,s,i){this._input=t,this._inputSize=t.length,this._actions=s,this._types=i,this._offset=0,this._cache={},this._failure=0,this._expected=[]};a.prototype.parse=function(){var t=this._read_url();if(t!==r&&this._offset===this._inputSize)return t;throw 0===this._expected.length&&(this._failure=this._offset,this._expected.push("<EOF>")),this.constructor.lastError={offset:this._offset,expected:this._expected},new SyntaxError(s(this._input,this._failure,this._expected))};var l=function(t,s){s=s||{};var i=new a(t,s.actions,s.types);return i.parse()};t(a.prototype,u);var p={Grammar:u,Parser:a,parse:l};if("function"==typeof require&&"object"==typeof exports)t(exports,p);else{var c="undefined"!=typeof this?this:window;c.URL=p}}();